#!/bin/bash

# Echo Web Server测试脚本
# 用于测试各种HTTP请求类型并获取截图

echo "===========================================" 
echo "Echo Web Server测试脚本"
echo "===========================================" 
echo "提示：在每个测试之后，请截图保存测试结果"
echo "===========================================" 
echo ""

# 确保echo_server正在运行
echo "请确保echo_server已在另一个终端窗口运行"
echo "如果没有运行，请先运行 ./echo_server"
echo ""
read -p "准备好开始测试了吗？按Enter键继续..." 

# 测试1：GET方法
echo ""
echo "===========================================" 
echo "测试1：GET方法（应该回显请求）"
echo "===========================================" 
./echo_client -h localhost -p 9999 -m GET -u /
echo ""
echo "测试1完成。请截图保存结果。"
read -p "按Enter键继续下一个测试..." 

# 测试2：HEAD方法
echo ""
echo "===========================================" 
echo "测试2：HEAD方法（应该回显请求）"
echo "===========================================" 
./echo_client -h localhost -p 9999 -m HEAD -u /
echo ""
echo "测试2完成。请截图保存结果。"
read -p "按Enter键继续下一个测试..." 

# 测试3：POST方法（带请求体）
echo ""
echo "===========================================" 
echo "测试3：POST方法（应该回显请求，包括请求体）"
echo "===========================================" 
./echo_client -h localhost -p 9999 -m POST -u / -d "Hello World"
echo ""
echo "测试3完成。请截图保存结果。"
read -p "按Enter键继续下一个测试..." 

# 测试4：未实现的方法（DELETE）
echo ""
echo "===========================================" 
echo "测试4：DELETE方法（应该返回501 Not Implemented）"
echo "===========================================" 
./echo_client -h localhost -p 9999 -m DELETE -u /
echo ""
echo "测试4完成。请截图保存结果。"
read -p "按Enter键继续下一个测试..." 

# 测试5：格式错误的请求
echo ""
echo "===========================================" 
echo "测试5：格式错误的请求（应该返回400 Bad Request）"
echo "===========================================" 
echo "This is not a valid HTTP request" | nc localhost 9999
echo ""
echo "测试5完成。请截图保存结果。"

echo ""
echo "===========================================" 
echo "所有测试完成！"
echo "===========================================" 
echo "请确保您已截图保存了所有测试结果，以便在实验报告中使用。"
